Gettablechart() {
  const apiUrls = this.apiurl + '/ViewChangeRequest/ViewChangerequest';

  const httpOptions = {
    headers: new HttpHeaders({
      'Content-Type': 'application/json'
    })
  };

  this.http.get(apiUrls).subscribe(
    (response: any[]) => { // Ensure response is typed as an array of any
      this.chartdata = response;

      // Initialize multi array
      this.multi = [];

      // Extract unique plant IDs
      const uniquePlants = [...new Set(response.map(item => item.plantId))];

      // Process data for each plant
      uniquePlants.forEach(plantId => {
        const plantData = response.filter(item => item.plantId === plantId);

        // Count occurrences for each stage for the current plant
        const stagesCount: { [key: string]: number } = { // Define index signature
          Approval: plantData.filter(item => item.stage.trim() === 'Approval').length,
          Closure: plantData.filter(item => item.stage.trim() === 'Closure').length,
          Implementation: plantData.filter(item => item.stage.trim() === 'Implementation').length,
          Initiated: plantData.filter(item => item.stage.trim() === 'Initiated').length,
          Release: plantData.filter(item => item.stage.trim() === 'Release').length
        };

        // Create entry for the plant in multi array
        this.multi.push({
          name: plantId,
          series: Object.keys(stagesCount).map(stage => ({ name: stage, value: stagesCount[stage] }))
        });
      });

      console.log('multi:', this.multi);
    },
    (error) => {
      console.log("API request failed", error);
    }
  );
}
