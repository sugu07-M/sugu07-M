getBarchart() {
    const apiUrls = this.apiurl + '/Barchart/Getbarchart';

    const httpOptions = {
      headers: new HttpHeaders({
        'content-Type': 'application/json'
      })
    };

    this.http.get(apiUrls).subscribe(
      (response: any[]) => {
        this.chartdata = response;

        // Initialize arrays to store data for each month
        const monthlyData = Array(12).fill({ completed: 0, nonCompleted: 0 });

        // Extracting data for each month
        response.forEach((item: { crmonth: number, completedIdnum: number, nonCompletedIdnum: number }) => {
          const monthIndex = item.crmonth - 1; // Months are 1-based, array index is 0-based
          monthlyData[monthIndex].completed += item.completedIdnum;
          monthlyData[monthIndex].nonCompleted += item.nonCompletedIdnum;
        });

        // Update chart data and labels
        this.updateBarChartLabels();
        this.updateBarChartData(monthlyData);
      },
      (error: any) => {
        console.log("Post failed", error);
      }
    );
  }

  updateBarChartData(monthlyData: { completed: number, nonCompleted: number }[]) {
    this.barChartData = [
      { data: monthlyData.map(data => data.nonCompleted), label: 'Open' },
      { data: monthlyData.map(data => data.completed), label: 'Completed' }
    ];
  }

  updateBarChartLabels() {
    const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    this.barChartLabels = monthNames;
  }
