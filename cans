Severity	Code	Description	Project	File	Line	Suppression State
Error	TS2304	(TS) Cannot find name 'stagesToCount'.	D:\IT_Portal\IT-Portal\IT-Portal.UI\tsconfig.json	D:\IT_Portal\IT-Portal\IT-Portal.UI\src\app\dashboard\dashboard.component.ts	421	Active
Error	TS2304	(TS) Cannot find name 'multi'.	D:\IT_Portal\IT-Portal\IT-Portal.UI\tsconfig.json	D:\IT_Portal\IT-Portal\IT-Portal.UI\src\app\dashboard\dashboard.component.ts	409	Active

public chartOptions: Partial<ChartOptions> = {};
  getChartData() {
    const apiUrls = this.apiurl + '/ViewChangeRequest/ViewChangerequest';
    const httpOptions = {
      headers: new HttpHeaders({
        'Content-Type': 'application/json'
      })
    };

    const stagesToCount = ['Approval', 'Closure', 'Implementation', 'Initiated', 'Release'];
    const multi: any[] = []; // Initialize the multi array here

    this.http.get(apiUrls, httpOptions).subscribe(
      (response: any) => {
        const chartData: any[] = response;

        const uniquePlants = [...new Set(chartData.map(item => item.plantId))];

        uniquePlants.forEach(plantId => {
          const plantData = chartData.filter(item => item.plantId === plantId);

          const stagesCount: { [key: string]: number } = {};
          stagesToCount.forEach(stage => {
            stagesCount[stage] = plantData.filter(item => item.stage.trim() === stage).length;
          });

          const seriesData = stagesToCount.map(stage => stagesCount[stage]);
          multi.push({
            name: plantId,
            data: seriesData
          });
        });

        this.chartOptions = {
          series: multi,
          chart: {
            type: 'bar',
            height: 350,
            stacked: true
          },
          plotOptions: {
            bar: {
              horizontal: true
            }
          },
          xaxis: {
            categories: stagesToCount,
            labels: {
              formatter: val => val + 'K'
            }
          },
          title: {
            text: 'Fiction Books Sales'
          },
          yaxis: {
            title: {
              text: undefined
            }
          },
          tooltip: {
            y: {
              formatter: val => val + 'K'
            }
          },
          fill: {
            opacity: 1
          },
          legend: {
            position: 'top',
            horizontalAlign: 'left',
            offsetX: 40
          }
        };

        console.log('Chart options:', this.chartOptions);
      },
      error => {
        console.error("API request failed", error);
      }
    );
  }

interface ChartOptions {
  series: ApexAxisChartSeries[];
  chart: ApexChart;
  xaxis: ApexXAxis;
  plotOptions: ApexPlotOptions;
  title: ApexTitleSubtitle;
  yaxis: ApexYAxis;
  tooltip: ApexTooltip;
  fill: ApexFill;
  legend: ApexLegend;
}
