getChartData() {
  const apiUrls = this.apiurl + '/ViewChangeRequest/ViewChangerequest';
  const httpOptions = {
    headers: new HttpHeaders({
      'Content-Type': 'application/json'
    })
  };

  const stagesToCount = ['Approval', 'Closure', 'Implementation', 'Initiated', 'Release'];
  const multi: any[] = []; // Initialize the multi array here

  this.http.get(apiUrls, httpOptions).subscribe(
    (response: any) => {
      const chartData: any[] = response;

      const uniquePlants = [...new Set(chartData.map(item => item.plantId))];

      uniquePlants.forEach(plantId => {
        const plantData = chartData.filter(item => item.plantId === plantId);

        const stagesCount: { [key: string]: number } = {};
        stagesToCount.forEach(stage => {
          stagesCount[stage] = plantData.filter(item => item.stage.trim() === stage).length;
        });

        const seriesData = stagesToCount.map(stage => stagesCount[stage]);
        multi.push({
          name: plantId,
          data: seriesData
        });
      });

     

      console.log('Chart options:', this.chartOptions);
    },
    error => {
      console.error("API request failed", error);
    }
  );
}
