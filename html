public barChartData: any[] = [
  { data: [], label: 'Open' },
  { data: [], label: 'Completed' }
]
 public barChartLabels: string[] = this.generateChartLabels();

  chartdata: any;
 completed: any;
 noncompleted: any;
 month: any;
 Getbarchart() {
   const apiUrls = this.apiurl + '/Barchart/Getbarchart';
   

   const httpOptions = {
     headers: new HttpHeaders({
       'content-Type': 'application/json'
     })
   };

   this.http.get(apiUrls).subscribe(
    (response: any) => {
      console.log("API Response:", response);

      if (response && response.completed && response.noncompleted) {
        this.completed = response.completed;
        this.noncompleted = response.noncompleted;

        console.log("Completed Data:", this.completed);
        console.log("Non-Completed Data:", this.noncompleted);

        // Populate the barChartData array with the obtained data
        this.barChartData = [
          { data: this.noncompleted, label: 'Open' },
          { data: this.completed, label: 'Completed' }
        ];

        console.log("Bar Chart Data:", this.barChartData);
      } else {
        console.error("API response is missing 'completed' or 'noncompleted' data.");
      }
    },
     (error) => {
       console.error("Post failed", error);
     }
   );
 }

 generateChartLabels(): string[] {
  const today: Date = new Date();
  let currentMonth: number = today.getMonth();
  let currentYear: number = today.getFullYear();

  const labels: string[] = [];
  for (let i: number = 6; i >= 0; i--) {
    const date: Date = new Date(currentYear, currentMonth, 1);
    const month: string = date.toLocaleString('default', { month: 'short' });
    labels.push(`${month} ${date.getFullYear()}`);

    // Update current month and year for the next iteration
    if (currentMonth === 0) {
      currentMonth = 11;
      currentYear--;
    } else {
      currentMonth--;
    }
  }
  return labels.reverse(); 
}
  

