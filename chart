getChangeRequest() {
  const apiUrls = this.apiurl + '/ViewChangeRequest/ViewChangerequest';
  let queryParams = new HttpParams();

  if (this.selectedPlantIds.length > 0 && this.startDate && this.endDate) {
    queryParams = queryParams.set('plantId', this.selectedPlantIds.join(','));
    queryParams = queryParams.set('crdate', this.startDate + '-' + this.endDate);
  }

  const httpOptions = {
    headers: new HttpHeaders({
      'content-Type': 'application/json'
    }),
    params: queryParams
  };

  this.http.get(apiUrls, httpOptions).subscribe(
    (response: any) => {
      this.changerequest = response;

      this.filter = this.changerequest.filter((item: any) => {

        const selectedPlantIds = this.selectedPlantIds.map(plant => plant.item_text);

        const isIncluded = selectedPlantIds.includes(item.plantId);

        return isIncluded;
      });
      this.getChartData();
      this.getBarchart();
   
      this.countStatus();
      if (this.startDate != '') {

        this.filter = this.filter.filter((item: any) => item.crdate > this.startDate && item.crdate <= this.endDate)

        /*    alert('in post cond' + this.startDate + 'enddt' + this.endDate + 'len' + this.filter.length);*/
      }
    },
    (error: any) => {
      console.error('Fetching change request data failed', error);
    }
  );

}
