Gettablechart() {
  const apiUrls = this.apiurl + '/ViewChangeRequest/ViewChangerequest';

  const httpOptions = {
    headers: new HttpHeaders({
      'Content-Type': 'application/json' // Corrected header name
    })
  };

  this.http.get(apiUrls).subscribe(
    (response: any[]) => {
      this.chartdata = response;

      // Initialize multi array
      this.multi = [];

      // Process data for each plant
      response.forEach((item: any) => {
        const plantId = item.plantId;
        const stage = item.stage.trim();

        // Find or create entry for the plant in multi array
        let plantEntry = this.multi.find(entry => entry.name === plantId);
        if (!plantEntry) {
          plantEntry = {
            name: plantId,
            series: []
          };
          this.multi.push(plantEntry);
        }

        // Find or create series entry for the stage
        let stageEntry = plantEntry.series.find(series => series.name === stage);
        if (!stageEntry) {
          stageEntry = {
            name: stage,
            value: 0
          };
          plantEntry.series.push(stageEntry);
        }

        // Increment count for the stage
        stageEntry.value++;
      });

      console.log('multi:', this.multi);
    },
    (error) => {
      console.log("API request failed", error);
    }
  );
}
