changerequest: any[] = [];
newCount: number = 0;
completedCount: number = 0;
pendingCount: number = 0;
pendingApproval: number = 0;
Approved: number = 0;
Rejected: number = 0;
Implemention: number = 0;
pending: number = 0;
release: number = 0;
Closure: number = 0;

getchangerequest() {
  const apiUrls = this.apiurl + '/ViewChange/GetAllchanges';
  const requestBody = {}

  const httpOptions = {
    headers: new HttpHeaders({
      'content-Type': 'application/json'
    })
  };

  this.http.get(apiUrls, requestBody).subscribe(
    (response: any) => {
      this.changerequest = response;
    /*  this.countStatus();*/
     
    },
     
    (error) => {
      console.error("Post failed", error);
    }
  );
}
public doughnutChartData: ChartData<"doughnut", number[], string>[] | undefined;
countStatus() {
  this.newCount = this.changerequest.filter(item => item.status.trim() === 'Draft').length;
  this.completedCount = this.changerequest.filter(item => item.status.trim() === 'Completed').length;
  this.pendingCount = this.changerequest.filter(item => item.status.trim() === 'Approved level1').length;
  this.pendingApproval = this.changerequest.filter(item => item.status.trim() === 'Pending Approval').length;
  this.Approved = this.changerequest.filter(item => item.status.trim() === 'Approved').length;
  this.Rejected = this.changerequest.filter(item => item.status.trim() === 'Rejected').length;
  this.Implemention = this.changerequest.filter(item => item.status.trim() === 'Implement').length;
  this.pending = this.changerequest.filter(item => item.status.trim() === 'Pending').length;
  this.release = this.changerequest.filter(item => item.status.trim() === 'Release').length;
  this.doughnutChartData = [
    {
      data: [
        this.newCount,
        this.pendingApproval,
        this.Approved,
        this.Rejected,
        this.Implemention,
        this.pending,
        this.release,
        this.completedCount
      ],
      label: 'Sales',
      backgroundColor: [
        '#3B71CA',
        '#808080ff',
        '#14A44D',
        '#DC4C64',
        '#54B4D3',
        '#E4A11B',
        '#b5eb49',
        '#808080ff'
      ],
    }
  ]
  
}
